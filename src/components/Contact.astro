---
import { getLangFromUrl, useTranslations } from '../i18n/utils';

// Obtener el idioma actual y las traducciones
const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
---

<section id={lang === 'es' ? 'contacto' : 'contact'} class="section contact">
  <div class="container">
    <h2 class="section-title">{t('contact.title')}</h2>
    <div class="contact-container">
      <div class="contact-info">
        <div class="terminal">
          <div class="terminal-header">
            <div class="terminal-buttons">
              <span class="terminal-button close"></span>
              <span class="terminal-button minimize"></span>
              <span class="terminal-button maximize"></span>
            </div>
            <div class="terminal-title">contact.js</div>
          </div>
          <div class="terminal-body">
            <div class="code-line"><span class="keyword">const</span> <span class="variable">developer</span> <span class="operator">=</span> <span class="bracket">{</span></div>
            <div class="code-line indent-1"><span class="property">name</span><span class="operator">:</span> <span class="string">"Ramón"</span><span class="comma">,</span></div>
            <div class="code-line indent-1"><span class="property">title</span><span class="operator">:</span> <span class="string">"{lang === 'es' ? 'Desarrollador de Software' : 'Software Developer'}"</span><span class="comma">,</span></div>
            <div class="code-line indent-1"><span class="property">status</span><span class="operator">:</span> <span class="string">"{lang === 'es' ? 'Disponible para proyectos' : 'Available for projects'}"</span><span class="comma">,</span></div>
            <div class="code-line indent-1"><span class="property">contact</span><span class="operator">:</span> <span class="bracket">{</span></div>
            <div class="code-line indent-2"><span class="property">email</span><span class="operator">:</span> <span class="string">"gracia123ramon@hotmail.com"</span><span class="comma">,</span></div>
            <div class="code-line indent-2"><span class="property">phone</span><span class="operator">:</span> <span class="string">"+52 667 121 0309"</span><span class="comma">,</span></div>
            <div class="code-line indent-2"><span class="property">location</span><span class="operator">:</span> <span class="bracket">{</span></div>
            <div class="code-line indent-3"><span class="property">street</span><span class="operator">:</span> <span class="string">"Calle Manantial de Imala #7831"</span><span class="comma">,</span></div>
            <div class="code-line indent-3"><span class="property">city</span><span class="operator">:</span> <span class="string">"Culiacán"</span><span class="comma">,</span></div>
            <div class="code-line indent-3"><span class="property">state</span><span class="operator">:</span> <span class="string">"Sinaloa"</span><span class="comma">,</span></div>
            <div class="code-line indent-3"><span class="property">zipCode</span><span class="operator">:</span> <span class="string">"80040"</span></div>
            <div class="code-line indent-2"><span class="bracket">}</span><span class="comma">,</span></div>
            <div class="code-line indent-2"><span class="property">social</span><span class="operator">:</span> <span class="bracket">[</span></div>
            <div class="code-line indent-3"><span class="bracket">{</span> <span class="property">name</span><span class="operator">:</span> <span class="string">"GitHub"</span><span class="comma">,</span> <span class="property">url</span><span class="operator">:</span> <span class="string">"https://github.com/"</span> <span class="bracket">}</span><span class="comma">,</span></div>
            <div class="code-line indent-3"><span class="bracket">{</span> <span class="property">name</span><span class="operator">:</span> <span class="string">"LinkedIn"</span><span class="comma">,</span> <span class="property">url</span><span class="operator">:</span> <span class="string">"https://www.linkedin.com/in/ramongracia/"</span> <span class="bracket">}</span><span class="comma">,</span></div>
            <div class="code-line indent-3"><span class="bracket">{</span> <span class="property">name</span><span class="operator">:</span> <span class="string">"Twitter"</span><span class="comma">,</span> <span class="property">url</span><span class="operator">:</span> <span class="string">"https://twitter.com/"</span> <span class="bracket">}</span></div>
            <div class="code-line indent-2"><span class="bracket">]</span></div>
            <div class="code-line indent-1"><span class="bracket">}</span></div>
            <div class="code-line"><span class="bracket">}</span><span class="semicolon">;</span></div>
            <div class="code-line"></div>
            <div class="code-line"><span class="comment">// {lang === 'es' ? 'Envíame un mensaje' : 'Send me a message'}</span></div>
            <div class="code-line"><span class="keyword">function</span> <span class="function">sendMessage</span><span class="parenthesis">(</span><span class="parameter">message</span><span class="parenthesis">)</span> <span class="bracket">{</span></div>
            <div class="code-line indent-1"><span class="keyword">return</span> <span class="variable">developer</span><span class="dot">.</span><span class="property">contact</span><span class="dot">.</span><span class="function">respond</span><span class="parenthesis">(</span><span class="parameter">message</span><span class="parenthesis">)</span><span class="semicolon">;</span></div>
            <div class="code-line"><span class="bracket">}</span></div>
            <div class="cursor"></div>
          </div>
        </div>

        <div class="social-links">
          <a href="https://github.com/" target="_blank" class="social-link" aria-label="{lang === 'es' ? 'Perfil de GitHub de Ramón' : 'Ramón\'s GitHub Profile'}" title="GitHub">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true" role="img">
              <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>
            </svg>
            <span class="sr-only">GitHub</span>
          </a>
          <a href="https://www.linkedin.com/in/ramongracia/" target="_blank" class="social-link" aria-label="{lang === 'es' ? 'Perfil de LinkedIn de Ramón' : 'Ramón\'s LinkedIn Profile'}" title="LinkedIn">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true" role="img">
              <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path>
              <rect x="2" y="9" width="4" height="12"></rect>
              <circle cx="4" cy="4" r="2"></circle>
            </svg>
            <span class="sr-only">LinkedIn</span>
          </a>
          <a href="https://twitter.com/" target="_blank" class="social-link" aria-label="{lang === 'es' ? 'Perfil de Twitter de Ramón' : 'Ramón\'s Twitter Profile'}" title="Twitter">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true" role="img">
              <path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path>
            </svg>
            <span class="sr-only">Twitter</span>
          </a>
        </div>
      </div>

      <div class="contact-form">
        <div class="form-header">
          <div class="form-title">new Message()</div>
          <div class="form-subtitle">// {lang === 'es' ? 'Envíame un mensaje y te responderé lo antes posible' : 'Send me a message and I will reply as soon as possible'}</div>
        </div>
        <form>
          <div class="form-group">
            <label for="name"><span class="keyword">const</span> name <span class="operator">=</span></label>
            <div class="input-wrapper">
              <span class="quote">"</span>
              <input type="text" id="name" name="name" required placeholder={lang === 'es' ? 'Tu nombre' : 'Your name'}>
              <span class="quote">"</span><span class="semicolon">;</span>
            </div>
          </div>

          <div class="form-group">
            <label for="email"><span class="keyword">const</span> email <span class="operator">=</span></label>
            <div class="input-wrapper">
              <span class="quote">"</span>
              <input type="email" id="email" name="email" required placeholder="tu@email.com">
              <span class="quote">"</span><span class="semicolon">;</span>
            </div>
          </div>

          <div class="form-group">
            <label for="subject"><span class="keyword">const</span> subject <span class="operator">=</span></label>
            <div class="input-wrapper">
              <span class="quote">"</span>
              <input type="text" id="subject" name="subject" required placeholder={lang === 'es' ? 'Asunto del mensaje' : 'Message subject'}>
              <span class="quote">"</span><span class="semicolon">;</span>
            </div>
          </div>

          <div class="form-group">
            <label for="message"><span class="keyword">const</span> message <span class="operator">=</span></label>
            <div class="input-wrapper textarea-wrapper">
              <span class="quote">"</span>
              <textarea id="message" name="message" rows="5" required placeholder={lang === 'es' ? 'Tu mensaje aquí...' : 'Your message here...'}></textarea>
              <span class="quote">"</span><span class="semicolon">;</span>
            </div>
          </div>

          <button type="submit" class="btn btn-code">
            <span class="function">sendMessage</span><span class="parenthesis">(</span><span class="parameter">message</span><span class="parenthesis">)</span><span class="semicolon">;</span>
          </button>
        </form>
      </div>
    </div>
  </div>
</section>

<style>
  .contact {
    background-color: var(--light-background);
  }

  .section-title {
    font-size: 2.5rem;
    text-align: center;
    margin-bottom: 3rem;
    position: relative;
  }

  .section-title::after {
    content: '';
    position: absolute;
    bottom: -10px;
    left: 50%;
    transform: translateX(-50%);
    width: 80px;
    height: 4px;
    background-color: var(--primary-color);
    border-radius: 2px;
  }

  .contact-container {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 3rem;
    width: 100%;
    max-width: 100%;
    overflow-x: hidden;
  }

  /* Terminal Styles */
  .terminal {
    background-color: #1e1e1e;
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
    margin-bottom: 2rem;
    font-family: 'Consolas', 'Monaco', monospace;
    font-size: 0.9rem;
    line-height: 1.5;
  }

  html.dark .terminal {
    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.4);
  }

  .terminal-header {
    background-color: #323233;
    padding: 0.5rem 1rem;
    display: flex;
    align-items: center;
    justify-content: space-between;
    border-bottom: 1px solid #444;
  }

  .terminal-buttons {
    display: flex;
    gap: 0.5rem;
  }

  .terminal-button {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    display: inline-block;
  }

  .terminal-button.close {
    background-color: #ff5f56;
  }

  .terminal-button.minimize {
    background-color: #ffbd2e;
  }

  .terminal-button.maximize {
    background-color: #27c93f;
  }

  .terminal-title {
    color: #ddd;
    font-size: 0.8rem;
  }

  .terminal-body {
    padding: 1rem;
    color: #f8f8f2;
    max-height: 400px;
    overflow-y: auto;
    background-color: #1a1a1a; /* Fondo más oscuro para mejor contraste */
  }

  /* Code Styles */
  .code-line {
    margin-bottom: 0.25rem;
    white-space: pre-wrap;
    word-break: break-word;
    position: relative;
  }

  .indent-1 {
    padding-left: 1.5rem;
  }

  .indent-2 {
    padding-left: 3rem;
  }

  .indent-3 {
    padding-left: 4.5rem;
  }

  .keyword {
    color: #c01a72; /* Rosa aún más oscuro para mejor contraste */
    font-weight: 700; /* Texto más grueso */
  }

  .variable {
    color: #6b46c1; /* Púrpura aún más oscuro para mejor contraste */
    font-weight: 700; /* Texto más grueso */
  }

  .function {
    color: #22a559; /* Verde aún más oscuro para mejor contraste */
    font-weight: 700; /* Texto más grueso */
  }

  .parameter {
    color: #c05621; /* Naranja aún más oscuro para mejor contraste */
    font-weight: 700; /* Texto más grueso */
  }

  .operator {
    color: #c01a72; /* Rosa aún más oscuro para mejor contraste */
    font-weight: 700; /* Texto más grueso */
  }

  .property {
    color: #0b7285; /* Azul aún más oscuro para mejor contraste */
    font-weight: 700; /* Texto más grueso */
  }

  .string {
    color: #744210; /* Amarillo aún más oscuro para mejor contraste */
    font-weight: 700; /* Texto más grueso */
  }

  .bracket {
    color: #e2e8f0; /* Gris claro para mejor contraste con el fondo oscuro */
    font-weight: 700; /* Texto más grueso */
  }

  .comma {
    color: #e2e8f0; /* Gris claro para mejor contraste con el fondo oscuro */
    font-weight: 700; /* Texto más grueso */
  }

  .semicolon {
    color: #e2e8f0; /* Gris claro para mejor contraste con el fondo oscuro */
    font-weight: 700; /* Texto más grueso */
  }

  .comment {
    color: var(--comment-color); /* Usar la variable para mejor contraste */
    font-weight: 500; /* Texto más grueso para mejor legibilidad */
  }

  .dot {
    color: #e2e8f0; /* Gris claro para mejor contraste con el fondo oscuro */
    font-weight: 700; /* Texto más grueso */
  }

  .parenthesis {
    color: #e2e8f0; /* Gris claro para mejor contraste con el fondo oscuro */
    font-weight: 700; /* Texto más grueso */
  }

  .cursor {
    display: inline-block;
    width: 8px;
    height: 16px;
    background-color: #f8f8f2;
    animation: blink 1s step-end infinite;
    vertical-align: middle;
  }

  @keyframes blink {
    0%, 100% { opacity: 1; }
    50% { opacity: 0; }
  }

  /* Clase para texto solo visible para lectores de pantalla */
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border-width: 0;
  }

  /* Form Styles */
  .contact-form {
    background-color: var(--card-background);
    padding: 2rem;
    border-radius: 8px;
    box-shadow: 0 4px 6px var(--shadow-color);
    font-family: 'Consolas', 'Monaco', monospace;
    width: 100%;
    box-sizing: border-box;
  }

  .form-header {
    margin-bottom: 2rem;
  }

  .form-title {
    font-size: 1.5rem;
    color: var(--primary-color);
    margin-bottom: 0.5rem;
    font-weight: 700; /* Texto más grueso para mejor contraste */
    text-shadow: 0 1px 0 rgba(0, 0, 0, 0.05); /* Sombra sutil para mejorar legibilidad */
  }

  .form-subtitle {
    color: var(--text-color); /* Usar color de texto principal para mejor contraste */
    font-size: 0.9rem;
    font-weight: 600; /* Texto más grueso para mejor contraste */
  }

  .form-group {
    margin-bottom: 1.5rem;
  }

  label {
    display: block;
    margin-bottom: 0.5rem;
    font-weight: 500;
    color: var(--text-color);
  }

  .input-wrapper {
    display: flex;
    align-items: center;
    background-color: var(--light-background);
    border-radius: 4px;
    border: 1px solid var(--border-color);
    padding: 0 0.75rem;
    transition: border-color 0.3s ease;
  }

  html.dark .input-wrapper {
    background-color: #2d3748;
  }

  /* Estilos para modo oscuro con mejor contraste */
  html.dark .terminal-body {
    background-color: #171717; /* Fondo aún más oscuro para modo oscuro */
  }

  html.dark .bracket,
  html.dark .comma,
  html.dark .semicolon,
  html.dark .dot,
  html.dark .parenthesis {
    color: #ffffff; /* Blanco para máximo contraste en modo oscuro */
    font-weight: 700;
  }

  html.dark .keyword,
  html.dark .operator {
    color: #f8a5c2; /* Rosa más brillante para modo oscuro */
    font-weight: 700;
  }

  html.dark .variable {
    color: #c4b5fd; /* Púrpura más brillante para modo oscuro */
    font-weight: 700;
  }

  html.dark .function {
    color: #34d399; /* Verde más brillante para modo oscuro */
    font-weight: 700;
  }

  html.dark .parameter {
    color: #fdba74; /* Naranja más brillante para modo oscuro */
    font-weight: 700;
  }

  html.dark .property {
    color: #67e8f9; /* Azul más brillante para modo oscuro */
    font-weight: 700;
  }

  html.dark .string,
  html.dark .quote {
    color: #fde047; /* Amarillo más brillante para modo oscuro */
    font-weight: 700;
  }

  .input-wrapper:focus-within {
    border-color: var(--primary-color);
  }

  .quote {
    color: #744210; /* Amarillo aún más oscuro para mejor contraste */
    font-size: 1.2rem;
    font-weight: 700; /* Texto más grueso */
  }

  input, textarea {
    flex: 1;
    background: transparent;
    border: none;
    padding: 0.75rem 0;
    color: var(--text-color);
    font-family: inherit;
    font-size: 1rem;
  }

  input:focus, textarea:focus {
    outline: none;
  }

  .textarea-wrapper {
    align-items: flex-start;
  }

  .textarea-wrapper .quote:first-child {
    margin-top: 0.75rem;
  }

  .textarea-wrapper .quote:last-of-type {
    margin-bottom: 0.75rem;
  }

  .btn-code {
    background-color: var(--primary-color);
    color: white;
    border: none;
    border-radius: 4px;
    padding: 0.75rem 1.5rem;
    font-family: 'Consolas', 'Monaco', monospace;
    font-size: 1rem;
    font-weight: 600; /* Texto más grueso para mejor contraste */
    cursor: pointer;
    transition: all 0.3s ease;
    display: inline-block;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    text-shadow: 0 1px 1px rgba(0, 0, 0, 0.2); /* Sombra de texto para mejorar legibilidad */
  }

  .btn-code:hover {
    background-color: var(--secondary-color);
    transform: translateY(-2px);
    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
  }

  html.dark .btn-code:hover {
    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
  }

  /* Social Links */
  .social-links {
    display: flex;
    gap: 1rem;
    justify-content: center;
  }

  .social-link {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background-color: var(--primary-color);
    color: white;
    transition: all 0.3s ease;
  }

  .social-link:hover {
    background-color: var(--secondary-color);
    transform: translateY(-3px);
    box-shadow: 0 6px 12px var(--shadow-color);
  }

  /* Tablet styles */
  @media (min-width: 769px) and (max-width: 1024px), (min-width: 481px) and (max-width: 768px) and (orientation: landscape) {
    .contact-container {
      gap: 2rem;
    }

    .terminal {
      max-height: 380px;
    }

    .terminal-body {
      max-height: 300px;
      font-size: 0.85rem;
    }

    .tech-icon {
      width: 45px;
      height: 45px;
    }

    .form-group {
      margin-bottom: 1.2rem;
    }

    .input-wrapper {
      padding: 0 0.6rem;
    }

    input, textarea {
      padding: 0.6rem 0;
      font-size: 0.95rem;
    }

    .quote {
      font-size: 1.1rem;
    }

    .form-title {
      font-size: 1.4rem;
    }

    .form-subtitle {
      font-size: 0.85rem;
    }

    .btn-code {
      padding: 0.7rem 1.3rem;
      font-size: 0.95rem;
    }

    /* Ajustes específicos para tablets */
    .terminal-button {
      width: 10px;
      height: 10px;
    }

    .terminal-title {
      font-size: 0.75rem;
    }

    .code-line {
      margin-bottom: 0.2rem;
    }

    .social-links {
      margin-top: 1.5rem;
    }

    .social-link {
      width: 36px;
      height: 36px;
    }

    .contact-form {
      padding: 1.5rem;
    }

    /* Ajustes para evitar desbordamiento */
    .terminal-body {
      overflow-x: auto;
    }

    .code-line {
      white-space: pre-wrap;
      word-break: break-word;
      font-size: 0.8rem;
    }
  }

  /* Mobile styles */
  @media (max-width: 768px) {
    .contact-container {
      grid-template-columns: 1fr;
      gap: 2rem;
      padding: 0 0.5rem;
      width: 100%;
      max-width: 100%;
      overflow-x: hidden;
    }

    .section-title {
      font-size: 2rem;
      margin-bottom: 2rem;
    }

    .terminal-body {
      font-size: 0.8rem;
    }

    .indent-1 {
      padding-left: 1rem;
    }

    .indent-2 {
      padding-left: 2rem;
    }

    .indent-3 {
      padding-left: 3rem;
    }

    .terminal {
      max-height: none;
      margin-bottom: 2rem;
    }

    .terminal-body {
      max-height: none;
      overflow-x: hidden;
    }

    .form-group {
      margin-bottom: 1rem;
    }

    .input-wrapper {
      padding: 0 0.5rem;
      width: 100%;
      box-sizing: border-box;
    }

    input, textarea {
      padding: 0.6rem 0;
      font-size: 0.9rem;
    }

    .quote {
      font-size: 1rem;
    }

    .form-title {
      font-size: 1.3rem;
    }

    .form-subtitle {
      font-size: 0.8rem;
    }

    .btn-code {
      padding: 0.6rem 1.2rem;
      font-size: 0.9rem;
      width: 100%;
    }

    /* Ajustes adicionales para móviles */
    .terminal-button {
      width: 8px;
      height: 8px;
    }

    .terminal-title {
      font-size: 0.7rem;
    }

    .terminal-header {
      padding: 0.4rem 0.8rem;
    }

    .terminal-body {
      padding: 0.8rem;
    }

    .code-line {
      margin-bottom: 0.15rem;
      white-space: pre-wrap;
      word-break: break-word;
      font-size: 0.75rem;
    }

    .social-links {
      margin-top: 1.2rem;
      justify-content: center;
    }

    .social-link {
      width: 32px;
      height: 32px;
    }

    .contact-form {
      padding: 1.2rem;
      width: 100%;
      box-sizing: border-box;
      margin: 0 auto;
    }

    /* Ajustes para pantallas muy pequeñas */
    @media (max-width: 480px) {
      .contact-container {
        padding: 0;
      }
      .terminal-body {
        font-size: 0.7rem;
        padding: 0.6rem;
      }

      .code-line {
        font-size: 0.7rem;
        margin-bottom: 0.1rem;
      }

      .indent-1 {
        padding-left: 0.8rem;
      }

      .indent-2 {
        padding-left: 1.6rem;
      }

      .indent-3 {
        padding-left: 2.4rem;
      }

      .form-title {
        font-size: 1.2rem;
      }

      .form-subtitle {
        font-size: 0.75rem;
      }

      .contact-form {
        padding: 0.8rem;
        width: 100%;
        box-sizing: border-box;
        margin: 0 auto;
      }

      .form-group {
        margin-bottom: 0.8rem;
      }
    }
  }
</style>
